<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="../js/funcoes.js"></script>
    <script src="../../src/routes/usuarios.js"></script>
    <link rel="stylesheet" href="../css/ListProdutos.css">
</head>
<body >
    //onload="validarSessao(), AtualizarFeed()"
    <h1>Listar usuario</h1><br><br><br><br>
    <a href="./cadastro.html" style="margin-left: 70%;">Cadastrar novo colaborador</a><br><br>

    <button onclick="ListagemDeUsuario()">Listar</button>
    <div id="dadosUsuario"></div>

   

    </Div><br><br>
</div>
</div>
</body>
</html>
<script>
function ListagemDeUsuario(params) { 
            

    fetch("/usuarios/listar", {
        method: "GET",
            headers: {
                "Content-Type": "application/json"
            }
    }).then(function (resposta) {
            console.log("Realizei a consulta")
            console.log(resposta)
        resposta.json().then(json =>{ 
            console.log(json)
            console.log(JSON.stringify(json))
            
            let tabelaHTML = "<table border='1'>";
        tabelaHTML += "<tr><th>Email</th><th>CPF</th><th>Nome</th></tr>";

        
        json.forEach(usuario => {
            tabelaHTML += "<tr>";
            tabelaHTML += "<td>" + usuario.email + "</td>";
            tabelaHTML += "<td>" + usuario.CPF + "</td>";
            tabelaHTML += "<td>" + usuario.nome + "</td>";
            tabelaHTML += "</tr>";
        });

        tabelaHTML += "</table>";

       
        document.getElementById("dadosUsuario").innerHTML = tabelaHTML;
        }).catch(error => console.error('Erro', error))
        }
)


}




</script>